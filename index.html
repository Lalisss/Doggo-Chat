<script>
window.onload = function() {
  const chatBox = document.getElementById('chatBox');
  const input = document.getElementById('userInput');
  const btn = document.getElementById('sendBtn');
  const dogReplies = [
    "à¸„à¸´à¸”à¸–à¸¶à¸‡à¸ˆà¸±à¸‡", "à¸„à¸´à¸”à¸–à¸¶à¸‡à¸¡à¸²à¸à¹†", "à¸£à¸±à¸à¹€à¸šà¸šà¸µà¹‹", "à¸£à¸±à¸à¸™à¸°à¸„à¸°à¸žà¸µà¹ˆà¸„à¸™à¸ªà¸§à¸¢à¸‚à¸²",
    "à¸£à¸±à¸à¸¡à¸²à¸à¹†à¹†à¹†à¹†à¹†à¹†à¹†à¹†à¹†", "à¸—à¸³à¹„à¸¡à¸ªà¸§à¸¢à¸ˆà¸±à¸‡à¸„à¸°", "à¸„à¸´à¸”à¸–à¸¶à¸‡à¸‡à¹ˆà¸²à¸²à¸²à¸²à¸²à¸²à¸²à¸²à¸²à¸²",
    "à¸­à¸¢à¸²à¸à¹€à¸ˆà¸­à¹à¸¥à¹‰à¸§", "à¸«à¸™à¸¹à¸£à¸±à¸à¸žà¸µà¹ˆà¸¡à¸²à¸à¹†à¸™à¸°à¸„à¸°à¸£à¸¹à¹‰à¸¡à¸±à¹‰à¸¢"
  ];
  let lastReplyIndex = -1;

  function addMessage(text, sender) {
    const msg = document.createElement('div');
    msg.classList.add('msg', sender);
    msg.textContent = text;
    chatBox.appendChild(msg);
    chatBox.scrollTo({ top: chatBox.scrollHeight, behavior: 'smooth' });
  }

  function doggoRespond() {
    let newIndex;
    do {
      newIndex = Math.floor(Math.random() * dogReplies.length);
    } while (newIndex === lastReplyIndex && dogReplies.length > 1);
    lastReplyIndex = newIndex;
    const reply = dogReplies[newIndex];
    setTimeout(() => addMessage(reply, 'doggo'), 800);
  }

  function sendMsg() {
    const text = input.value.trim();
    if (!text) return;
    addMessage(text, 'user');
    input.value = '';
    doggoRespond();
  }

  btn.addEventListener('click', sendMsg);
  input.addEventListener('keypress', (e) => {
    if (e.key === 'Enter') sendMsg();
  });

  const hearts = document.getElementById('hearts');
  function spawnHeart() {
    const paw = document.createElement('div');
    paw.classList.add('heart');
    paw.style.left = Math.random() * 100 + 'vw';
    paw.style.animationDuration = 4 + Math.random() * 3 + 's';
    paw.textContent = ['ðŸ¾','ðŸ¦´','ðŸ•','ðŸ’ž'][Math.floor(Math.random()*4)];
    hearts.appendChild(paw);
    setTimeout(()=>paw.remove(), 6000);
  }
  setInterval(spawnHeart, 600);
};
</script>
